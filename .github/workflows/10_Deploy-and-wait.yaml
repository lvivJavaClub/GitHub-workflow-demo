name: Deploy and wait

on:
  # label: # uncomment push
  push:
    branches:
      - main

env:
  ENV_NAME: test

jobs:

  deploy:
    name: Deploy
    uses: ./.github/workflows/09_Deploy.yaml
    with:
      environment: ${{ env.ENV_NAME }}

  wait:
    name: Wait
    needs:
      - deploy
    uses: ./.github/workflows/08_Wait-for-deployment.yaml
    with:
      environment: ${{ env.ENV_NAME }}
      docker_tag: ${{ needs.deploy.outputs.docker_tag }}
